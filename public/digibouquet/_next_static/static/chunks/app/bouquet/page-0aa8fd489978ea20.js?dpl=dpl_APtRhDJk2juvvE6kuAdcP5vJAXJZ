(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{4180:(e,t,r)=>{"use strict";r.d(t,{BouquetProvider:()=>o,Z:()=>i});var a=r(628),n=r(2552),s=r(5223);let l=(0,n.createContext)(void 0);function o(e){let{children:t,mode:r}=e,[o,i]=(0,n.useState)({mode:r,flowers:[],letter:{sender:"",recipient:"",message:""},greenery:0,timestamp:Date.now(),flowerOrder:[]}),d=(0,s.RW)(o.flowers),c=(0,s.z4)(o.flowers);return(0,a.jsx)(l.Provider,{value:{bouquet:o,setBouquet:i,totalFlowers:d,canProceed:c,addFlower:e=>{i(t=>{let r;r=t.flowers.find(t=>t.id===e.id)?t.flowers.map(t=>t.id===e.id?{...t,count:t.count+1}:t):[...t.flowers,{id:e.id,count:1}];let a=(0,s.A5)(r);return{...t,flowers:r,flowerOrder:a}})},removeFlower:e=>{i(t=>{let r,a=t.flowers.find(t=>t.id===e);if(!a)return t;r=a.count<=1?t.flowers.filter(t=>t.id!==e):t.flowers.map(t=>t.id===e?{...t,count:t.count-1}:t);let n=(0,s.A5)(r);return{...t,flowers:r,flowerOrder:n}})}},children:t})}function i(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useBouquet must be used within a BouquetProvider");return e}},5223:(e,t,r)=>{"use strict";function a(e){return Array.from({length:e.reduce((e,t)=>e+t.count,0)},(e,t)=>t)}function n(e){let t={};return e.forEach(e=>{t[e.id]=e.count}),t}function s(e){return e.reduce((e,t)=>e+t.count,0)}function l(e){let t=s(e);return t>=6&&t<=10}r.d(t,{A5:()=>a,RW:()=>s,fr:()=>n,z4:()=>l})},9102:(e,t,r)=>{"use strict";r.d(t,{default:()=>C});var a=r(628),n=r(2552),s=r(201),l=r(1225);let o=[{id:1,name:"orchid",meaning:"Beauty",birthMonth:"October",size:"medium"},{id:2,name:"tulip",meaning:"Perfect love",birthMonth:"April",size:"medium"},{id:3,name:"dahlia",meaning:"Elegance",birthMonth:"August",size:"small"},{id:4,name:"anemone",meaning:"Anticipation",birthMonth:"September",size:"medium"},{id:5,name:"carnation",meaning:"Fascination",birthMonth:"January",size:"large"},{id:6,name:"zinnia",meaning:"Lasting Affection",birthMonth:"July",size:"medium"},{id:7,name:"ranunculus",meaning:"Radiant Charm",birthMonth:"March",size:"medium"},{id:8,name:"sunflower",meaning:"Adoration",birthMonth:"August",size:"large"},{id:9,name:"lily",meaning:"Purity",birthMonth:"May",size:"large"},{id:10,name:"daisy",meaning:"Innocence",birthMonth:"April",size:"small"},{id:11,name:"peony",meaning:"Romance",birthMonth:"May",size:"medium"},{id:12,name:"rose",meaning:"Love and passion",birthMonth:"June",size:"medium",color:"red"}];var i=r(5194),d=r(5850),c=r(4638);function u(e){let{delayDuration:t=0,...r}=e;return(0,a.jsx)(i.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function m(e){let{...t}=e;return(0,a.jsx)(u,{children:(0,a.jsx)(i.bL,{"data-slot":"tooltip",...t})})}function f(e){let{...t}=e;return(0,a.jsx)(i.l9,{"data-slot":"tooltip-trigger",...t})}function h(e){let{className:t,sideOffset:r=0,children:n,...s}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{"data-slot":"tooltip-content",sideOffset:r,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,c.QP)((0,d.$)(t))}("rounded border shadow-lg bg-background text-popover-foreground border-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) px-3 py-1.5 text-balance",t),...s,children:n})})}var x=r(4180),p=r(5223),g=r(6730);function w(){let{bouquet:e,totalFlowers:t,addFlower:r,removeFlower:n}=(0,x.Z)(),s=(0,p.fr)(e.flowers);return(0,a.jsx)(u,{disableHoverableContent:!0,delayDuration:0,children:(0,a.jsxs)("div",{className:"h-full text-center dfont-crimson",children:[(0,a.jsx)("h2",{className:"mb-4 uppercase text-md",children:"Pick 6 to 10 BLOOMS"}),t>0&&(0,a.jsx)("p",{className:"mb-8 text-sm opacity-50",children:"Click on a flower's name to deselect it."}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-8 items-center min-h-[200px]",children:o.map(n=>(0,a.jsxs)(m,{children:[(0,a.jsx)(f,{asChild:!0,children:(0,a.jsxs)("button",{className:"flex relative flex-col items-center cursor-pointer",onClick:a=>{a.preventDefault(),r(n),g.Ay.capture("flower_added",{flower_name:n.name,flower_id:n.id,flower_meaning:n.meaning,mode:e.mode,total_flowers:t+1})},children:[(0,a.jsx)("div",{className:"".concat("small"===n.size?"w-32 h-32":"large"===n.size?"w-48 h-48":"w-40 h-40"," flex items-center justify-center transition-transform duration-300 overflow-hidden ").concat(s[n.id]?"transform -translate-y-2":""," hover:transform hover:-translate-y-2"),children:(0,a.jsx)(l.default,{src:"/"+e.mode+"/flowers/"+n.name+".png",alt:n.name,width:"small"===n.size?128:"large"===n.size?192:160,height:"small"===n.size?128:"large"===n.size?192:160,className:"object-cover",priority:!0})}),s[n.id]&&(0,a.jsx)("div",{className:"flex absolute top-0 right-0 justify-center items-center w-5 h-5 text-xs rounded-full bg-primary text-primary-foreground sm:w-6 sm:h-6",children:s[n.id]})]})}),(0,a.jsxs)(h,{onPointerDownOutside:e=>e.preventDefault(),side:"bottom",sideOffset:8,className:"z-10 p-2 w-40 text-center sm:w-48 bg-[#F9F9EE]",children:[(0,a.jsx)("h3",{className:"font-bold uppercase text-md",children:n.name}),(0,a.jsx)("p",{className:"text-sm",children:n.meaning}),(0,a.jsxs)("p",{className:"text-sm",children:["Birth Month: ",n.birthMonth]})]})]},n.id))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:Object.entries(s).map(r=>{let[s,l]=r,i=o.find(e=>e.id===Number.parseInt(s));return i?(0,a.jsxs)("div",{className:"px-3 py-1 text-sm rounded-full border transition-colors cursor-pointer border-primary text-primary hover:bg-primary hover:text-primary-foreground",onClick:()=>{n(Number.parseInt(s)),g.Ay.capture("flower_removed",{flower_name:i.name,flower_id:i.id,mode:e.mode,total_flowers:t-1})},children:[i.name.toUpperCase()," x",l]},s):null})})})]})})}function y(){let{bouquet:e,setBouquet:t}=(0,x.Z)();return(0,a.jsxs)("div",{className:"flex flex-col mx-auto max-w-screen-lg",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-6 text-center uppercase text-md",children:"Customize Your Bouquet"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center space-y-4",children:[(0,a.jsx)("button",{onClick:()=>{let r=Array.from({length:e.flowers.reduce((e,t)=>e+t.count,0)},(e,t)=>t);for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}t(e=>({...e,flowerOrder:r})),g.Ay.capture("bouquet_arrangement_randomized",{mode:e.mode,total_flowers:e.flowers.reduce((e,t)=>e+t.count,0)})},className:"px-5 py-3 text-white uppercase bg-black",children:"Try a new Arrangement"}),(0,a.jsx)("button",{onClick:()=>{let r=(e.greenery+1)%3;t(e=>({...e,greenery:(e.greenery+1)%3})),g.Ay.capture("bouquet_greenery_changed",{mode:e.mode,greenery_index:r})},className:"px-5 py-3 text-black uppercase border border-black",children:"Change Greenery"})]})]}),(0,a.jsx)("div",{className:"flex relative justify-center items-center py-4 my-16",children:(0,a.jsxs)("div",{className:"relative w-[500px] min-h-[410px]",children:[(0,a.jsx)(l.default,{src:"/".concat(e.mode,"/bush/bush-").concat(e.greenery+1,".png"),alt:"bush background",width:600,height:500,className:"absolute top-1/2 left-1/2 z-0 transform -translate-x-1/2 -translate-y-1/2",priority:!0}),(0,a.jsx)("div",{className:"flex flex-wrap reverse w-[300px] justify-center items-center -space-x-4 -space-y-20 relative m-auto",children:e.flowers.flatMap((t,r)=>{let n=o.find(e=>e.id===t.id);return n?Array(t.count).fill(null).map((s,o)=>{var i;let d=10*Math.random()-5,c=e.flowerOrder.length>0&&null!=(i=e.flowerOrder[r*t.count+o])?i:r*t.count+o,u=(e=>{switch(e){case"small":return 80;case"large":return 160;default:return 120}})(n.size);return(0,a.jsx)("div",{className:"flex relative justify-center items-center pt-4",style:{order:c},children:(0,a.jsx)(l.default,{src:"/".concat(e.mode,"/flowers/").concat(n.name,".png"),alt:n.name,width:u,height:u,className:"relative z-10 transition-transform hover:scale-105",style:{transform:"rotate(".concat(d,"deg)")},priority:!0})},"".concat(r,"-").concat(o))}):[]})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.default,{src:"/".concat(e.mode,"/bush/bush-").concat(e.greenery+1,"-top.png"),alt:"bush top",width:600,height:500,className:"absolute top-1/2 left-1/2 z-10 transform -translate-x-1/2 -translate-y-1/2",priority:!0})})]})})]})}function b(){let{bouquet:e,setBouquet:t}=(0,x.Z)();return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-md my-8",children:"WRITE THE CARD"}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center -space-x-12",children:[(0,a.jsx)(l.default,{src:"/full/flowers/daisy.png",alt:"card front",width:140,height:200,className:"-rotate-12 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(l.default,{src:"/full/flowers/lily.png",alt:"card front",width:140,height:200,className:"-translate-y-5 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(l.default,{src:"/full/flowers/anemone.png",alt:"card front",width:140,height:200,className:"rotate-12 hover:-translate-y-4 transition-all duration-300"})]}),(0,a.jsx)("div",{className:"bg-white border-2 border-black p-10 max-w-lg mx-10",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-row items-left justify-left gap-2",children:[(0,a.jsx)("label",{htmlFor:"recipient",children:"Dear "}),(0,a.jsx)("input",{id:"recipient",value:e.letter.recipient||"",onChange:e=>t(t=>({...t,letter:{...t.letter,recipient:e.target.value}})),placeholder:"Beloved,",className:"border-none bg-transparent focus:outline-none focus:ring-0"})," "]}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{id:"message",value:e.letter.message||"",onChange:e=>t(t=>({...t,letter:{...t.letter,message:e.target.value}})),placeholder:"I have so much to tell you, but only this much space on this card! Still, you must know...",rows:5,className:"w-full border-none bg-transparent focus:outline-none focus:ring-0"})}),(0,a.jsxs)("div",{className:"flex flex-col items-right justify-end gap-2",children:[(0,a.jsx)("label",{htmlFor:"sender",className:"text-right",children:"Sincerely,"}),(0,a.jsx)("input",{id:"sender",value:e.letter.sender||"",onChange:e=>t(t=>({...t,letter:{...t.letter,sender:e.target.value}})),placeholder:"Secret Admirer",className:"border-none bg-transparent text-right focus:outline-none focus:ring-0"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center -space-x-12",children:[(0,a.jsx)(l.default,{src:"/full/flowers/carnation.png",alt:"card front",width:140,height:200,className:"-rotate-12 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(l.default,{src:"/full/flowers/sunflower.png",alt:"card front",width:140,height:200,className:"-translate-y-5 hover:-translate-y-4 transition-all duration-300"}),(0,a.jsx)(l.default,{src:"/full/flowers/peony.png",alt:"card front",width:140,height:200,className:"rotate-12 hover:-translate-y-4 transition-all duration-300"})]})]})]})})}var j=r(9673),v=r.n(j),N=r(2314);let _=(0,r(8640).UU)("https://mfpgiwrnekanudelowcy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mcGdpd3JuZWthbnVkZWxvd2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwMzUxMTIsImV4cCI6MjA2OTYxMTExMn0.AEJkTniZT97oWpg32rANC32AeJKLEZ6DUOunfOBOX2o");var z=r(6693);let A=["Pick Flowers","Customize Bouquet","Write Card"];function C(){let{bouquet:e,canProceed:t}=(0,x.Z)(),r=(0,N.useRouter)(),[o,i]=(0,n.useState)(0),[d,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),f=async()=>{let t=e.flowers.reduce((e,t)=>e+t.count,0);g.Ay.capture("bouquet_shared",{mode:e.mode,total_flowers:t,has_message:!!e.letter.message,has_recipient:!!e.letter.recipient,has_sender:!!e.letter.sender}),c(!0);try{let{data:n,error:s}=await _.from("bouquets").insert([{short_id:(0,z.Ak)(8),mode:e.mode,flowers:e.flowers,letter:e.letter,timestamp:e.timestamp,greenery:e.greenery,flowerOrder:e.flowerOrder}]).select();if(s||!(null==n?void 0:n.length)){var a;g.Ay.capture("bouquet_share_failed",{mode:e.mode,total_flowers:t,error_message:null!=(a=null==s?void 0:s.message)?a:"No data returned"}),s&&g.Ay.captureException(s),c(!1);return}let l=n[0].id;g.Ay.capture("bouquet_share_completed",{mode:e.mode,total_flowers:t,bouquet_id:l,has_message:!!e.letter.message,has_recipient:!!e.letter.recipient,has_sender:!!e.letter.sender}),r.push("/bouquet/".concat(l))}catch(r){g.Ay.capture("bouquet_share_failed",{mode:e.mode,total_flowers:t,error_message:r instanceof Error?r.message:"Unknown error"}),g.Ay.captureException(r),c(!1)}},h=o===A.length-1;return(0,a.jsxs)("main",{className:"container flex flex-col p-4 mx-auto",children:["undefined"!=typeof document&&u&&(0,s.createPortal)((0,a.jsx)("div",{className:"fixed top-10 left-1/2 -translate-x-1/2 z-[10000] rounded-full bg-[#F9F9EE] text-black text-xs px-6 py-3 shadow-md border border-black text-center w-[85vw] max-w-sm",children:u}),document.body),(0,a.jsx)(v(),{href:"/",children:(0,a.jsx)(l.default,{src:"/digibouquet.png",alt:"digibouquet",width:200,height:80,className:"object-cover mx-auto mt-6",priority:!0})}),(0,a.jsxs)("div",{className:"flex-grow py-8",children:[0===o&&(0,a.jsx)(w,{}),1===o&&(0,a.jsx)(y,{}),2===o&&(0,a.jsx)(b,{})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 justify-center m-auto",children:[o>0&&(0,a.jsx)("button",{onClick:()=>i(e=>Math.max(e-1,0)),className:"text-sm px-4 py-2 border border-[#000000]",children:"BACK"}),o<A.length&&(0,a.jsx)("button",{onClick:()=>{if(0===o&&!t)return void(m("you need 6-10 blooms to continue! add more or click the flower names to remove any extra"),window.setTimeout(()=>m(null),1800));t&&!d&&(g.Ay.capture("bouquet_step_completed",{step_completed:A[o],step_number:o,next_step:h?"View bouquet":A[o+1],mode:e.mode,total_flowers:e.flowers.reduce((e,t)=>e+t.count,0)}),h?f():i(e=>Math.min(e+1,A.length-1)))},disabled:0!==o&&(!t||d),className:"text-sm px-4 py-2 ml-auto ".concat(t&&!d?"bg-[#000000] text-[#F5F5DC]":0===o?"bg-gray-300 text-gray-500 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:h&&d?"CREATINGâ€¦":"NEXT"})]})]})}},9318:(e,t,r)=>{Promise.resolve().then(r.bind(r,9102)),Promise.resolve().then(r.bind(r,4180))}},e=>{e.O(0,[406,990,733,611,938,358],()=>e(e.s=9318)),_N_E=e.O()}]);